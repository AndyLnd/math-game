<script lang="ts">
	import { fallSpeed, showMonster } from './gameState';
	import { animate } from './utils.svelte';
	let x = $state(-17);
	let y = $state(30);
	let a = $state(-45);
  let vx = $state(1);
	let mouthAngle = $state(40);
	const { isLeft = false } = $props();
	animate(() => {
    x += vx;
		if (x >= -4) vx = -.2
		if (mouthAngle > 0) mouthAngle -= 3;
		y -= $fallSpeed;
		if (y < -4) {
			$showMonster = false;
		}
		if (a < 0) {
			a += 5;
		}
	});
</script>

<g
	fill="#baa"
	style="transform: translate({isLeft ? x : 30 - x}px, {y}px ) scale({isLeft
		? 1
		: -1}, 1) rotate({a}deg)"
>
	<path
		d="M14.713 3.99999C13.7629 3.99601 13.1019 4.4949 12.1726 4.52332C9.99055 4.59004 7.80091 4.83758 5.57198 5.14946C5.44836 5.16675 5.32254 5.18471 5.19474 5.20296C4.2127 5.34315 3.11401 5.49999 2 5.49999C1.17157 5.49999 0.5 4.82842 0.5 3.99999C0.5 3.17157 1.17157 2.49999 2 2.49999C2.88677 2.49999 3.76429 2.37555 4.77156 2.23271C4.89767 2.21482 5.02581 2.19665 5.15627 2.1784C7.42861 1.86045 9.74083 1.59627 12.0809 1.52472C13.0669 1.49457 14.0632 1.49877 15.0283 1.50285C15.3564 1.50423 15.6808 1.5056 16 1.5056C16.8284 1.5056 17.6513 2.17432 17.6513 3.00275C17.3609 3.65109 17.8895 3.85443 17.033 4.35719C16.6856 4.35719 15.0512 4.00141 14.713 3.99999Z"
	/>
	<path
		d="M9.90983 0.32327C10.2096 0.287691 10.565 0.245499 11 0.245499C11.8284 0.245499 12.5 0.917072 12.5 1.7455C12.5 2.57393 11.8284 3.2455 11 3.2455C10.7517 3.2455 10.5732 3.26636 10.2708 3.30168C10.2256 3.30696 10.1776 3.31257 10.1262 3.31847C9.72853 3.36418 9.24174 3.41106 8.5094 3.41106C8.30111 3.41106 8.08219 3.44534 7.81716 3.50616C7.71678 3.5292 7.62559 3.55211 7.52254 3.57801C7.48252 3.58806 7.44072 3.59856 7.3959 3.6097C7.25099 3.6457 7.07276 3.68866 6.89057 3.72022C6.06242 3.86365 5.35059 4.15552 4.92385 4.41957L4.91011 4.42807L4.89619 4.43627C4.33025 4.76981 3.76859 4.99231 3.33319 5.14311C3.11465 5.21881 2.91956 5.27918 2.77552 5.32373L2.77515 5.32384C2.69991 5.34711 2.64608 5.36376 2.60169 5.37812C2.56562 5.38979 2.55181 5.39486 2.55179 5.39481C2.55178 5.3948 2.55327 5.39423 2.55596 5.39316C1.78653 5.7002 0.913882 5.32537 0.606836 4.55594C0.29979 3.78652 0.674622 2.91387 1.44405 2.60682C1.57569 2.55429 1.74359 2.50254 1.8581 2.46724C1.86895 2.4639 1.87931 2.4607 1.88913 2.45767C2.03307 2.41315 2.18517 2.36589 2.35132 2.30834C2.68132 2.19404 3.03452 2.04967 3.36115 1.85868C4.14141 1.37924 5.21464 0.965819 6.3786 0.764224C6.49198 0.744586 6.57668 0.722835 6.70246 0.690534C6.80785 0.663471 6.94206 0.629003 7.14615 0.582169C7.5083 0.499059 7.9768 0.411059 8.50942 0.41106C9.09405 0.411063 9.46104 0.37517 9.78367 0.338092C9.82461 0.333386 9.86664 0.328397 9.90983 0.32327Z"
	/>
	<path
		transform-origin="10.25 4"
		transform="rotate({mouthAngle})"
		d="M10.25 3.86532C10.2535 3.5892 10.4801 3.36816 10.7562 3.37161C12.0957 3.38834 13.43 3.53388 14.628 3.66455C14.6598 3.66802 14.6916 3.67148 14.7232 3.67492C14.8877 3.69285 15.0542 3.71057 15.2216 3.72838C15.5377 3.76202 15.8566 3.79594 16.169 3.83206C16.3021 3.84745 16.3907 3.85719 16.5034 3.85719C16.7796 3.85719 17.0034 4.08104 17.0034 4.35719C17.0034 4.63333 16.7796 4.85719 16.5034 4.85719C16.3287 4.85719 16.1896 4.8411 16.0586 4.82596L16.0541 4.82544C15.7458 4.7898 15.4355 4.75678 15.1226 4.7235C14.9541 4.70557 14.7849 4.68757 14.6148 4.66904C14.5888 4.6662 14.5628 4.66336 14.5367 4.66051C13.3272 4.52863 12.0343 4.38765 10.7438 4.37153C10.4676 4.36808 10.2466 4.14144 10.25 3.86532Z"
	/>
	<path
		d="M10.4995 0.742409C10.4562 0.708785 10.4077 0.687607 10.3531 0.687607C10.2992 0.768324 10.2968 0.98872 10.3342 1.07293C10.3643 1.14066 10.3511 1.2194 10.3839 1.28872C10.4152 1.35502 10.4447 1.42073 10.4918 1.47367C10.5862 1.57995 10.6764 1.65863 10.8309 1.65863H11.2471C11.4542 1.65863 11.4556 1.66351 11.5635 1.62993C11.7393 1.57524 11.6857 1.58139 11.6752 1.56958C11.6546 1.54642 11.6168 1.53523 11.5938 1.51221C11.5461 1.46446 11.4732 1.42534 11.4166 1.3889C11.3343 1.33605 11.2642 1.27102 11.1862 1.21251C11.0429 1.10505 10.8784 1.01335 10.7307 0.911096C10.6505 0.855614 10.5754 0.801489 10.4995 0.742409Z"
		fill="#800"
	/>
</g>
